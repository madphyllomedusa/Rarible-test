"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAuctionHouseFee = exports.getAuctionHouse = void 0;
var tslib_1 = require("tslib");
var solana_common_1 = require("@rarible/solana-common");
var address_converters_1 = require("./address-converters");
var auctionHouseFee = {
    "8Qu3azqi31VpgPwVW99AyiBGnLSpookWQiwLMvFn4NFm": 250, // 2.5%
};
function getAuctionHouse(currency, auctionHouseMapping) {
    if (currency["@type"] === "SOLANA_SOL") {
        if (auctionHouseMapping && auctionHouseMapping["SOLANA_SOL"]) {
            return (0, solana_common_1.toPublicKey)(auctionHouseMapping["SOLANA_SOL"].address);
        }
    }
    else if (currency["@type"] === "SOLANA_NFT") {
        var mintAddress = (0, address_converters_1.extractAddress)(currency.itemId);
        if (auctionHouseMapping && auctionHouseMapping[mintAddress]) {
            return (0, solana_common_1.toPublicKey)(auctionHouseMapping[mintAddress].address);
        }
    }
    return (0, solana_common_1.toPublicKey)("8Qu3azqi31VpgPwVW99AyiBGnLSpookWQiwLMvFn4NFm");
}
exports.getAuctionHouse = getAuctionHouse;
function getAuctionHouseFee(ah, auctionHouseMapping) {
    var _a;
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var ahAddress, ahRecord;
        return tslib_1.__generator(this, function (_b) {
            ahAddress = ah.toString();
            if (auctionHouseMapping) {
                ahRecord = Object.values(auctionHouseMapping)
                    .find(function (record) { return record.address === ahAddress; });
                if (ahRecord) {
                    return [2 /*return*/, ahRecord.baseFee];
                }
            }
            return [2 /*return*/, (_a = auctionHouseFee[ahAddress]) !== null && _a !== void 0 ? _a : 0];
        });
    });
}
exports.getAuctionHouseFee = getAuctionHouseFee;
