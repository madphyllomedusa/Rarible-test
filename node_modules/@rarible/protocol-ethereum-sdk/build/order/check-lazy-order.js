"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.checkLazyOrder = void 0;
var tslib_1 = require("tslib");
function checkLazyOrder(checkLazyAsset, form) {
    return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {
        var make, take;
        return (0, tslib_1.__generator)(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, checkLazyMakeAsset(checkLazyAsset, form.make, form.maker)];
                case 1:
                    make = _a.sent();
                    return [4 /*yield*/, checkLazyAsset(form.take)];
                case 2:
                    take = _a.sent();
                    return [2 /*return*/, (0, tslib_1.__assign)((0, tslib_1.__assign)({}, form), { make: make, take: take })];
            }
        });
    });
}
exports.checkLazyOrder = checkLazyOrder;
function checkLazyMakeAsset(checkLazyAsset, asset, maker) {
    return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {
        var make;
        return (0, tslib_1.__generator)(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, checkLazyAsset(asset)];
                case 1:
                    make = _a.sent();
                    if (isLazyAsset(make.assetType) && make.assetType.creators[0].account === maker) {
                        return [2 /*return*/, make];
                    }
                    return [2 /*return*/, asset];
            }
        });
    });
}
function isLazyAsset(x) {
    return x.assetClass === "ERC1155_LAZY" || x.assetClass === "ERC721_LAZY";
}
