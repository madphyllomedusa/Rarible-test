"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fixWithLimit = exports.sizeOf = void 0;
function sizeOf(value) {
    if (typeof value === "boolean")
        return 4;
    if (typeof value === "number")
        return 8;
    if (typeof value === "string")
        return value.length * 2;
    if (typeof value === "object") {
        if (!value)
            return 0;
        return Object
            .keys(value)
            .reduce(function (total, key) { return sizeOf(key) + sizeOf(value[key]) + total; }, 0);
    }
    return 0;
}
exports.sizeOf = sizeOf;
function fixWithLimit(value, bytesLimit) {
    return value.map(function (x) {
        try {
            var size = sizeOf(x);
            if (size > bytesLimit) {
                return "[Byte limit]";
            }
            return x;
        }
        catch (error) {
            return "[Too big object]";
        }
    });
}
exports.fixWithLimit = fixWithLimit;
