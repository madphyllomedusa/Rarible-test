"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var _1 = require(".");
describe("utils/batcher", function () {
    it("should drop values as batch", function () { return (0, tslib_1.__awaiter)(void 0, void 0, void 0, function () {
        var myHandler, batcher, _a, amount, result;
        return (0, tslib_1.__generator)(this, function (_b) {
            switch (_b.label) {
                case 0:
                    myHandler = jest.fn();
                    batcher = new _1.Batcher(100, myHandler);
                    batcher.add(2);
                    batcher.add(1);
                    return [4 /*yield*/, new Promise(function (resolve) {
                            setTimeout(function () {
                                resolve([myHandler.mock.calls.length, myHandler.mock.calls[0][0]]);
                            }, 200);
                        })];
                case 1:
                    _a = _b.sent(), amount = _a[0], result = _a[1];
                    expect(amount).toBe(1);
                    expect(result).toStrictEqual([2, 1]);
                    return [2 /*return*/];
            }
        });
    }); });
});
